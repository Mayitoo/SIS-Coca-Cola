<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIS | Coca-Cola Almac√©n</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="logo">
                <h2><a href="index1.html"> SIS Coca-Cola </a> </h2>
            </div>
            <nav>
                <ul>
                    <li class="active"><a href="almacen.html">üì¶ Almac√©n</a></li>
                    <li><a href="ventas.html">üíµ Ventas</a></li>
                    <li><a href="recursos-humanos.html">üë• Recursos Humanos</a></li>
                    <li><a href="marketing.html">üì£ Marketing</a></li>
                    <li><a href="Contabilidad.html">üßæ Contabilidad</a></li>
                    <li><a href="calidad.html">üßæ Calidad</a></li>
                </ul>
            </nav>
        </aside>

        <main class="content">
            <header class="content-header">
                <h1>Sistema de Ingreso de Datos: Contabilidad</h1>
                <p>M√≥dulo de Operaciones Centrales</p>
            </header>
            <section id="Contabilidad" class="data-module active-module">
                
                <h2>Registro de Inventario (Contabilidad)</h2>
                <form id="form-inventario">
                    
                    <label for="producto-tipo">Producto: Entrada/Salida:</label>
                    <select id="producto-tipo" name="producto-tipo">
                        <option value="Entrada">Entrada </option>
                        <option value="Salida">Salida </option>
                    </select>

                    <label for="producto-nombre">Producto:</label>
                    <select id="producto-nombre" name="producto-nombre">
                        <option value="cocacola-lata">Coca-Cola </option>
                        <option value="fanta-botella">Fanta </option>
                        <option value="agua-ciel">Agua Ciel</option>
                    </select>

                    <label for="cantidad-total">Cantidad (Total de Producto):</label>
                    <input type="number" id="cantidad-total" name="cantidad-total" oninput="calcularTotal()" min="1" required>
                    
                    <label for="precio-unitario">Precio (Unitario) $:</label>
                    <input type="number" id="precio-unitario" name="precio-unitario" oninput="calcularTotal()" step="0.01" min="0.01" required>

                    <label for="fecha-ingreso">Fecha:</label>
                    <input type="date" id="fecha-ingreso" name="fecha-ingreso" required>
                    
                    <label for="precio-total">Precio (Total) $:</label>
                    <input type="number" id="precio-total" name="precio-total" readonly>
                    
                    <button type="reset" class="btn-reset">Limpiar Inventario</button>
                </form>

                <hr>
                
                <h2>Registro de Inventario (Empleados)</h2>
                <form id="form-empleados">
                    
                    <label for="nombre-empleado">Nombre del Empleado:</label>
                    <input type="text" id="nombre-empleado" name="nombre-empleado" required>
                    <label for="apellido-paterno"> A. Paterno:</label>
                    <input type="text" id="apellido-paterno" name="apellido-paterno" required>
                    <label for="apellido-materno"> A. Materno:</label>
                    <input type="text" id="apellido-materno" name="apellido-materno" required>
                    <label for="id-empleado"> ID:</label>
                    <input type="text" id="id-empleado" name="id-empleado" required>
                    <label for="edad-empleado"> Edad:</label>
                    <input type="number" id="edad-empleado" name="edad-empleado" min="18" required>
                    
                    <button type="reset" class="btn-reset"> Limpiar el inventario</button>
                </form>
                
                <div style="margin-top: 30px; display: flex; justify-content: space-around;">
                    <button type="button" class="btn-submit" onclick="validarYConfirmarUnificado()">
                        üíæ Guardar Todos los Registros
                    </button>
                    
                    <button type="button" class="btn-secondary" onclick="actualizarInventario()">
                        üîÑ Actualizar Inventario
                    </button>

                    <button type="button" class="btn-danger" onclick="borrarTodosLosRegistros()">
                        üóëÔ∏è Borrar Todos los Registros
                    </button>
                </div>
            </section>
        </main>
    </div>

    <script>
        // 1. FUNCI√ìN DE C√ÅLCULO AUTOM√ÅTICO
        function calcularTotal() {
            const cantidad = parseFloat(document.getElementById('cantidad-total').value) || 0;
            const precioUnitario = parseFloat(document.getElementById('precio-unitario').value) || 0;
            const total = cantidad * precioUnitario; 
            
            const precioTotalInput = document.getElementById('precio-total');
            if (!isNaN(total)) {
                precioTotalInput.value = total.toFixed(2);
            } else {
                precioTotalInput.value = '';
            }
        }

        // 2. FUNCI√ìN DE VALIDACI√ìN Y CONFIRMACI√ìN UNIFICADA (EXISTENTE)
        function validarYConfirmarUnificado() {
            const formInventario = document.getElementById('form-inventario');
            const formEmpleados = document.getElementById('form-empleados');
            let inventarioValido = formInventario.checkValidity();
            let empleadosValido = formEmpleados.checkValidity();

            let mensajeAlerta = "‚ö†Ô∏è Se intentar√° guardar la informaci√≥n. Confirme para continuar.";
            let guardadoExitoso = true; 

            // Mostrar errores de validaci√≥n
            if (!inventarioValido) {
                formInventario.reportValidity();
                alert('‚ùå Error: El formulario de INVENTARIO tiene campos incompletos o inv√°lidos.');
                guardadoExitoso = false;
            }
            if (!empleadosValido) {
                formEmpleados.reportValidity();
                alert('‚ùå Error: El formulario de EMPLEADOS tiene campos incompletos o inv√°lidos.');
                guardadoExitoso = false;
            }
            
            // Si hay errores, detenemos el proceso
            if (!guardadoExitoso) {
                return;
            }

            // 3. Si ambos son v√°lidos, pedimos una confirmaci√≥n √∫nica
            const confirmacion = confirm(mensajeAlerta);

            if (confirmacion) {
                // Si el usuario presiona ACEPTAR
                
                // Procesar Inventario
                if (inventarioValido) {
                    // Aqu√≠ ir√≠a el c√≥digo para enviar los datos de Inventario
                    formInventario.reset(); 
                }

                // Procesar Empleados
                if (empleadosValido) {
                    // Aqu√≠ ir√≠a el c√≥digo para enviar los datos de Empleados
                    formEmpleados.reset(); 
                }
                
                alert('‚úÖ ¬°Guardado Exitoso! Los registros v√°lidos han sido procesados y limpiados.');
                
            } else {
                // El usuario presion√≥ CANCELAR
                alert('‚ùå Guardado de registros cancelado por el usuario.');
            }
            
            return false; 
        }

        // 3. FUNCI√ìN PARA BORRAR TODOS LOS REGISTROS (NUEVA)
        function borrarTodosLosRegistros() {
            const confirmacion = confirm("üö® ADVERTENCIA: Esta acci√≥n eliminar√° *todos* los datos almacenados (Inventario y Empleados). ¬øEst√° seguro?");
            
            if (confirmacion) {
                // Si usaras localStorage, aqu√≠ se vaciar√≠a: localStorage.clear();
                alert("‚úÖ Registros eliminados exitosamente. (Simulaci√≥n de limpieza de base de datos).");
                // Opcionalmente, puedes recargar la p√°gina para limpiar visualmente: window.location.reload();
            } else {
                alert("‚ùå Eliminaci√≥n de registros cancelada.");
            }
        }

        // 4. FUNCI√ìN PARA ACTUALIZAR INVENTARIO (NUEVA)
        function actualizarInventario() {
            // En un sistema real, esta funci√≥n solicitar√≠a los datos m√°s recientes al servidor.
            alert("üîÑ Solicitando los datos m√°s recientes... Inventario actualizado. (Simulaci√≥n de sincronizaci√≥n).");
            
            // En este punto, podr√≠as llamar a una funci√≥n que recargue las tablas de visualizaci√≥n.
            // Ejemplo: cargarTablas(); 
        }

        // Asegura que las funciones de c√°lculo se inicialicen al cargar la p√°gina
        document.addEventListener('DOMContentLoaded', (event) => {
            calcularTotal();
        });
    </script>
</body>
</html>